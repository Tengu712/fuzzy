# \{\}

## General

遅延評価ブロックを表す型。
文字列の集まりとしてみなせる。

## Functions

### `->`: `@['symbol]`

可変変数を定義する。
返戻値は`()`。

```fuzzy
{ 1 + 2 } -> 'block. -- blockという可変変数が定義される
block                -- { 1 + 2 }
```

### `=>`: `@['symbol]`

不変変数を定義する。
返戻値は`()`。

```fuzzy  
{ "hello" !! } => 'printer. -- printerという不変変数が定義される
printer                     -- { "hello" !! }
```

### `#`: `@[]`

遅延ブロックの長さを返す。
返戻値の型は`'u32`である。

```fuzzy
{} #        -- 0
{ 1 + 2 } # -- 3
```

### `^`: `@[]`

先頭の要素を返す。
返戻値の型は`'string`である。
空の遅延ブロックである場合、`()`が返る。

```fuzzy
{} ^        -- ()
{ 1 + 2 } ^ -- "1"
```

### `$`: `@[]`

末尾の要素を返す。
返戻値の型は`'string`である。
空配列である場合、`()`が返る。

```fuzzy
{} $        -- ()
{ 1 + 2 } $ -- "2"
```

### `@`: `@['i32]`

指定されたインデックスの要素を返す。
返戻値の型は`'string`である。
ブロック外のインデックスを指定した場合、`()`が返る。

```fuzzy
{ 1 + 2 } $ 1   -- "+"
{ 1 + 2 } $ -1  -- "2"
{ 1 + 2 } @ 100 -- ()
```

### `@@`: `@['i32 'string]`

指定されたインデックスの要素を目的語に置き換える。

```fuzzy
{ 1 + 2 } @@ 1 "-" -- { 1 - 2 }
```

### `@<`: `@['i32 'string]`

指定されたインデックスに要素を挿入する。

```fuzzy
{ 1 2 } @@ 1 "+" -- { 1 + 2 }
```

### `@-`: `@['i32]`

指定されたインデックスの要素を削除する。

```fuzzy
{ 1 + 2 } @@ 1 -- { 1 2 }
```

### `$-`: `@[]`

末尾の要素を削除する。

```fuzzy
{ 1 + 2 } $- -- { 1 + }
```

### `$>`: `@['_]`

末尾に要素を追加する。

```fuzzy
{ 1 + } $> "2" -- { 1 + 2 }
```

### `%`: `@[]`

遅延ブロックを評価する。

```fuzzy
{ 1 + 2 } % -- 3
```

### `%%`: `@['{}]`

主語が`()`を返すまで目的語を繰り返し評価する。

```fuzzy
5 -> 'i.
{ i > 0 } %% {
  i !
  i - 1, -> 'i.
}
-- 54321と出力される
```

### `:`: `@['[]]`

主語を目的語が示す関数型にキャストする。
ただし、目的語は次の要件を満たす配列でなければならない。

- すべての葉要素の型は`'symbol`である
- 各要素は引数の型を表す
- 要素が配列である場合、関数型を表す

```fuzzy
{ #0 @ #1 #2 } : [['i32 'i32] 'i32 'i32] -- 'i32を2個引数に取る関数と'i32を2個引数に取る関数
```

### `==`: `@['{}]`

主語が目的語と同値かを判定する。

```fuzzy
{ 1 + 2 } == { 1 + 2 } -- T
{ 1 + 2 } == { 2 + 1 } -- ()
```

### `!=`: `@['{}]`

主語が目的語と異値かを判定する。

```fuzzy
{ 1 + 2 } != { 1 + 2 } -- ()
{ 1 + 2 } != { 2 + 1 } -- T
```
